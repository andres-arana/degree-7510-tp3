package tests.Modelo;

import static org.junit.Assert.*;
import static org.mockito.Mockito.*;


import java.util.ArrayList;
import java.util.Calendar;
import java.util.List;

import modelo.IQuery;
import modelo.LineItemProducto;
import modelo.Producto;
import modelo.Venta;

import org.junit.BeforeClass;
import org.junit.Test;

public class VentaTest {

	@BeforeClass
	public static void setUpBeforeClass() throws Exception {
	}

	@Test
	public void marcarProductosComoOfertadosTest(){
		
		Venta venta = new Venta(Calendar.getInstance(), 1); 
		int cantidadaUnidades = 3; 
		IQuery query = mock(IQuery.class);
		
		when(query.query((Producto) any())).thenReturn(true);
		
		Producto producto = mock(Producto.class);
		
		when(producto.getId()).thenReturn(1);
		
		venta.addProducto(producto, cantidadaUnidades);
		
		venta.marcarTodosLosProductosOfertados(query, new ArrayList<Producto>());
		
		List<LineItemProducto> lineItems = venta.getProductos();
		
		assertEquals(lineItems.get(0).getProductosConOfertasPorCategoriaOMarcaAplicadas(), cantidadaUnidades);
		
		
	}


}
